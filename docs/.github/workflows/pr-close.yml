name: ðŸ§¹ PR Close

concurrency:
  group: ${{ github.repository }}-${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

on:
  pull_request:
    branches: [main]
    types: closed

jobs:

  destroy-pr-preview:
    name: ðŸ§¹ Destroy PR Preview
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: forge-42/fly-destroy@v1.0.0-rc.2
        id: destroy
        env:
          FLY_API_TOKEN: ${{ secrets.FLY_API_TOKEN }}
          FLY_ORG: ${{ vars.FLY_ORG }}
        with:
          app_name: ${{github.event.repository.name}}-${{ github.event.number }}
